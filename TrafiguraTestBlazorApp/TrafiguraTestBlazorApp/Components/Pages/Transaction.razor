@page "/transaction"

@using Newtonsoft.Json
@using TrafiguraTestModels
<h3>transaction </h3>

<EditForm Model="@transactionForm.Transaction" Context="formContext">
    <DataAnnotationsValidator />

    <div class="form-group mt-2">
        <label class="form-label">TradeID</label>
        <input type="number"
               class="form-control"
               placeholder="Enter TradeID"
               @bind-value="transactionForm.Transaction.TradeID" />
        <ValidationMessage For="@(()=>transactionForm.Transaction.TradeID)" />
    </div>

    <div class="form-group mt-2">
        <label class="form-label">SecurityCode</label>
        <input type="text"
               class="form-control"
               placeholder="Enter SecurityCode"
               @bind-value="transactionForm.Transaction.SecurityCode" />
        <ValidationMessage For="@(()=>transactionForm.Transaction.SecurityCode)" />
    </div>

    <div class="form-group mt-2">
        <label class="form-label">Quantity</label>
        <input type="number"
               class="form-control"
               placeholder="Enter Quantity"
               @bind-value="transactionForm.Transaction.Quantity" />
        <ValidationMessage For="@(()=>transactionForm.Transaction.Quantity)" />
    </div>

    <div class="form-group mt-2">
        <label class="form-label">Buy/Sell</label>
        <InputSelect class="form-select"
                     @bind-Value="transactionForm.Transaction.SubmitAction">
            <option value=""></option>
            @foreach (var opt in options)
            {
                <option value="@opt.Key">@opt.Value</option>
            }
        </InputSelect>
        <ValidationMessage For="@(() => transactionForm.Transaction.SubmitAction)" />
    </div>

    <div class="text-center mt-2">
        <NavLink class="nav-link" href="positions">
            <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> back to positions?
        </NavLink>
        <button type="submit" class="btn btn-primary" @onclick="@(() => Save(formContext))">Save</button>
        <button type="submit" class="btn btn-secondary" @onclick="@(() => Delete(formContext))">Delete</button>
    </div>

</EditForm>